<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>FilterX</title>
    <link href="{{ url_for('static', filename='./favicon.ico') }}" type="image/x-icon" rel="shortcut icon">
    <link href="{{ url_for('static', filename='./style.css') }}" type="text/css" rel="stylesheet">
    <script src="{{ url_for('static', filename='./logic.js') }}" type="text/javascript"></script>

    <link href="../static/favicon.ico" type="image/x-icon" rel="shortcut icon">
    <link href="../static/style.css" type="text/css" rel="stylesheet">
    <script src="../static/logic.js" type="text/javascript"></script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" type="text/javascript"></script>
  </head>

  <body class="dark">
    <header>
      <img id="logo" src="../static/logo.png" alt="FilterX Logo">
      <button id="theme-btn" type="button" onclick="change_theme();">Light Mode</button>
    </header>

    <div id="intro" class="dark">
      This website allows you to apply a filter to an image of your choice. Using this website is simple:
      <ol id="instructions">
        <li>Click 'Choose File' and select an image file of your choice.</li>
        <li>Click one of the 3 filter buttons to apply that filter to your image.</li>
        <li>That's it! Now you can download the filtered image (by right clicking the<br>
            image and selecting 'Save image as...') or try another filter.</li>
      </ol>
      <strong style="color: red;">Note:</strong> Due to EXIF flags (which vary from device to device), the uploaded image may <em>appear</em> to be rotated.<br>
      However, downloading the filtered image will maintain the original orientation of your file.
    </div>

    <div id="full-box">
      <!-- Open #full-box -->
      <div class="display-box">
        <p>Before</p>
        <input type="file" accept="image/*" onchange="upload(this);">
        <div class="display-img">
          <img id="old-img" src="../static/placeholder.jpg" alt="Old image goes here.">
        </div>
      </div>

      <div id="filter-btns">
        <div><button type="button" onclick="filter('black_and_white');">Black and White</button></div>
        <div><button type="button" onclick="filter('sepia');">Sepia</button></div>
        <div><button type="button" onclick="filter('censor');">Censor</button></div>
      </div>

      <div class="display-box">
        <p>After</p>
        <input type="file" style="visibility: hidden;">
        <div class="display-img">
          <img id="new-img" src="../static/placeholder.jpg" alt="New image goes here.">
        </div>
      </div>
      <!-- Close #full-box -->
    </div>

    <script>
     /* Set the src of #new-img to its base64 encoded string equivalent
        (stored in placeholder.txt) after the page is done loading */
     var xhr = new XMLHttpRequest();
     xhr.open('GET', '../static/placeholder.txt', true);
     xhr.onreadystatechange = function() {
         if (xhr.readyState == 4 && xhr.status == 200) {
             document.getElementById('new-img').src = xhr.response;
         }
     };
     xhr.send();
    </script>
  </body>
</html>
